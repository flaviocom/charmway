<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido de Vendas - Recompra</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header Moderno -->
        <header class="modern-header">
            <div class="header-grid">
                <div class="header-identity">
                    <div class="logo-container">
                        <img src="LogotipoCW.jpg" alt="Logotipo Charmway" class="logo">
                    </div>
                    <div class="title-container">
                        <h1 class="main-title">Pedido de Vendas</h1>
                    </div>
                </div>
                <div class="mobile-fields-container">
                    <div class="attendance-field">
                        <label class="attendance-label">Atendimento por:</label>
                        <input type="text" id="attendance-by" class="attendance-input" placeholder="Nome do atendente">
                    </div>
                    <button id="clear-order-btn" class="btn btn-warning" title="Limpar todos os dados do pedido">üóëÔ∏è Limpar Pedido</button>
                    <div class="date-container">
                        <div class="date-card">
                            <label class="date-label">Data do Pedido</label>
                            <input type="date" id="order-date" class="date-input">
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Formul√°rio Principal -->
        <main>
            <!-- LINHA 1: NOME E ENDERE√áO -->
            <div class="name-address-row">
                <div class="field-card">
                    <label class="field-label">NOME</label>
                    <input type="text" id="reseller-name" class="modern-input" placeholder="Digite o nome completo">
                </div>
                <div class="field-card">
                    <label class="field-label">ENDERE√áO:</label>
                    <input type="text" id="address" class="modern-input" placeholder="Digite o endere√ßo completo">
                </div>
            </div>

            <!-- LINHA 2: TELEFONE, FRETE, DESCONTO GERAL E ANOTA√á√ïES -->
            <div class="details-row">
                <div class="field-card">
                    <label class="field-label">TELEFONE:</label>
                    <input type="text" id="phone" class="modern-input" placeholder="Digite o telefone">
                </div>
                <div class="field-card">
                    <label class="field-label">FRETE</label>
                    <input type="number" id="freight" class="modern-input" step="0.01" min="0" placeholder="0,00">
                </div>
                <div class="field-card">
                    <label class="field-label">TRANSPORTE</label>
                    <div class="transport-container">
                        <select id="transport-select" class="modern-input">
                            <option value="">Selecione o transporte</option>
                            <option value="Correios - PAC">Correios - PAC</option>
                            <option value="Correios - Sedex">Correios - Sedex</option>
                            <option value="Motoboy">Motoboy</option>
                            <option value="Transportadora">Transportadora</option>
                            <option value="Retirada">Retirada</option>
                        </select>
                        <button type="button" id="add-transport-btn" class="add-transport-btn" title="Adicionar nova op√ß√£o de transporte">+</button>
                    </div>
                </div>
                <div class="field-card">
                    <label class="field-label">ANOTA√á√ïES</label>
                    <textarea id="notes" class="modern-textarea" placeholder="Digite suas anota√ß√µes aqui..."></textarea>
                </div>
            </div>

            <!-- Formas de Pagamento - Layout Horizontal -->
            <div class="payment-methods-row">
                <div class="field-card payment-methods-card">
                    <div class="payment-methods-header-row">
                        <label class="field-label">FORMAS DE PAGAMENTO:</label>
                        <label class="general-deadline-label-inline">Prazo Geral</label>
                        <input type="number" id="general-deadline-days" class="general-deadline-input-inline" min="0" max="999" step="1" placeholder="dias">
                        <span class="general-deadline-date-inline" id="general-deadline-date"></span>
                    </div>
                    <div class="payment-methods-container">
                        <!-- PIX -->
                        <div class="payment-method-item">
                            <div class="payment-method-header">
                                <input type="checkbox" id="payment-pix" class="payment-checkbox">
                                <label for="payment-pix" class="payment-label">PIX</label>
                            </div>
                            <input type="text" id="payment-pix-details" class="payment-details-input" placeholder="Chave PIX ou detalhes">
                        </div>

                        <!-- Cart√£o de Cr√©dito -->
                        <div class="payment-method-item">
                            <div class="payment-method-header">
                                <input type="checkbox" id="payment-credit" class="payment-checkbox">
                                <label for="payment-credit" class="payment-label">Cart√£o de Cr√©dito</label>
                            </div>
                            <div class="credit-card-details-inline">
                                <input type="number" id="payment-credit-installments" class="payment-installments-input-inline" value="1" min="1" max="12" step="1">
                                <span id="payment-installments-label" class="installments-label-inline">Parcelas</span>
                                <span id="credit-installment-value" class="credit-installment-value-display-inline">de R$0,00</span>
                            </div>
                        </div>

                        <!-- Boleto -->
                        <div class="payment-method-item">
                            <div class="payment-method-header boleto-header-inline">
                                <div class="boleto-checkbox-label">
                                    <input type="checkbox" id="payment-boleto" class="payment-checkbox">
                                    <label for="payment-boleto" class="payment-label">Boleto</label>
                                </div>
                                <div class="boleto-installments-inline">
                                    <input type="number" id="installments" class="modern-input installments-input" min="1" max="12" value="1">
                                    <span id="boleto-installments-label" class="installments-label">Parcelas de</span>
                                    <span id="boleto-installment-value" class="credit-installment-value-display-inline">R$0,00</span>
                                    
                                </div>
                            </div>
                            <div class="boleto-details">
                                <div id="payment-days-container" class="payment-days-grid">
                                    <!-- Campos de prazo ser√£o gerados dinamicamente -->
                                </div>
                            </div>
                        </div>

                        <!-- Transfer√™ncia Banc√°ria -->
                        <div class="payment-method-item">
                            <div class="payment-method-header">
                                <input type="checkbox" id="payment-transfer" class="payment-checkbox">
                                <label for="payment-transfer" class="payment-label">Transfer√™ncia Banc√°ria/Dep√≥sito</label>
                            </div>
                            <textarea id="payment-transfer-details" class="payment-details-textarea" placeholder="Dados banc√°rios" rows="2"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o de Produtos -->
            <section class="products-section">
                <h2>Produtos Dispon√≠veis</h2>
                
                <!-- Campo de Busca -->
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="product-search" class="modern-input search-input" placeholder="üîç Buscar produto...">
                        <button id="clear-search-btn" class="clear-search-btn" title="Limpar pesquisa">√ó</button>
                    </div>
                    <div class="hide-empty-container">
                        <input type="checkbox" id="hide-empty-lines" class="payment-checkbox">
                        <label for="hide-empty-lines" class="payment-label">Ocultar linhas vazias</label>
                    </div>
                    <div class="discount-and-clear-container">
                        <div class="field-card general-discount-card">
                            <label class="field-label">DESCONTO GERAL (%)</label>
                            <input type="number" id="general-discount" class="modern-input" step="0.01" min="0" max="100" placeholder="0.00">
                        </div>
                        <button id="clear-quantities-btn" class="btn btn-secondary" title="Limpar todas as quantidades">üóëÔ∏è Limpar Quantidades</button>
                    </div>
                </div>

                <!-- Tabela de Produtos -->
                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Pre√ßo<br>Cat√°logo</th>
                                <th>Desconto<br>(%)</th>
                                <th>Pre√ßo c/<br>Desconto</th>
                                <th>Total<br>Item</th>
                                <th>Lote</th>
                            </tr>
                        </thead>
                        <tbody id="products-tbody">
                            <!-- Produtos ser√£o gerados dinamicamente -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Se√ß√£o de Embalagens -->
            <section class="packaging-section">
                <div class="packaging-card">
                    <h3>Embalagens do Pedido</h3>
                    <div class="packaging-content">
                        <table class="packaging-table">
                            <thead>
                                <tr>
                                    <th>Caixa</th>
                                    <th>Qtde</th>
                                    <th>Peso (g)</th>
                                    <th>Peso Total (g)</th>
                                </tr>
                            </thead>
                            <tbody id="packaging-tbody">
                                <!-- Embalagens ser√£o geradas dinamicamente -->
                            </tbody>
                        </table>
                        <button id="add-new-packaging-btn" class="btn btn-secondary add-item-btn">+ Adicionar outro item</button>
                    </div>
                </div>
            </section>

            <!-- Resumo do Pedido -->
            <section class="summary-section">
                <div class="summary-card">
                    <h3>Resumo do Pedido</h3>
                    <div class="summary-content">
                        <div class="summary-item">
                            <span>Valor Bruto:</span>
                            <span id="gross-value" class="currency">R$ 0,00</span>
                        </div>
                        <div class="summary-item">
                            <span>Valor da Empresa:</span>
                            <span id="discounted-value" class="currency">R$ 0,00</span>
                        </div>
                        <div class="summary-item">
                            <span>Frete:</span>
                            <span id="freight-value" class="currency">R$ 0,00</span>
                            <span id="transport-display" class="transport-display"></span>
                        </div>
                        <div class="summary-item" id="profit-item">
                            <span>Lucro:</span>
                            <span id="profit-value" class="currency">R$ 0,00</span>
                        </div>
                        <div class="summary-item">
                            <span>Cr√©dito Pago:</span>
                            <input type="number" id="credit-paid" class="modern-input" placeholder="0,00" min="0" step="0.01">
                        </div>
                        <div class="summary-item">
                            <span class="highlight-settlement-value">Valor do Acerto:</span>
                            <span id="settlement-value" class="currency highlight-settlement-value">R$ 0,00</span>
                            <span class="copy-icon" id="copy-settlement-value" title="Copiar valor">üìã</span>
                        </div>
                        <div class="summary-item">
                            <span>Quantidade total:</span>
                            <span id="total-quantity">0</span>
                        </div>
                        <div class="summary-item">
                            <span>Peso Total:</span>
                            <span id="total-weight">0.00 kg</span>
                        </div>
                    </div>

                    <!-- Detalhes do Pagamento -->
                    <div class="installments-section">
                        <h4>Detalhes do Pagamento</h4>
                        <div id="installments-details">
                            <!-- Detalhes das parcelas ser√£o gerados dinamicamente -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bot√µes de A√ß√£o -->
            <div class="action-buttons">
                <button id="save-order-btn" class="btn btn-primary">üíæ Salvar Pedido</button>
                <button id="print-order-btn" class="btn btn-secondary">üñ®Ô∏è Imprimir Pedido</button>
                <button id="export-excel-btn" class="btn btn-success">üìä Salvar em Excel</button>
                <button id="expedition-btn" class="btn btn-secondary">üì¶ Expedi√ß√£o</button>
            </div>
        </main>
        
        <!-- Bot√µes de Scroll Autom√°tico -->
        <div class="scroll-buttons">
            <button id="scroll-to-top" class="scroll-btn scroll-to-top" title="Ir para o topo">
                <span class="scroll-arrow">‚Üë</span>
            </button>
            <button id="scroll-to-bottom" class="scroll-btn scroll-to-bottom" title="Ir para o rodap√©">
                <span class="scroll-arrow">‚Üì</span>
            </button>
        </div>
    </div>

    <!-- Bibliotecas para gera√ß√£o de PDF e imagem -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Garantir que jsPDF esteja dispon√≠vel globalmente
        window.jsPDF = window.jspdf?.jsPDF || window.jsPDF;
    </script>
    <!-- Biblioteca para gera√ß√£o de Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="script.js"></script>
</body>
</html>


